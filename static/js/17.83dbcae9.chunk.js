(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{206:function(e,t,a){"use strict";var r=a(3),n=a(4),o=a(6),l=a(5),c=a(7),s=a(0),i=a.n(s),m=a(21),u=a.n(m),d=a(207),p=a.n(d),g=function(e){function t(){return Object(r.a)(this,t),Object(o.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0 fixed",style:{zIndex:"9"}},i.a.createElement("div",{className:"block m-0"},i.a.createElement("div",{className:"block-content p-0"},i.a.createElement("div",{className:"input-group ".concat(this.props.boxshadow&&"search-box")},!this.props.disable_back_button&&i.a.createElement("div",{className:"input-group-prepend"},this.props.back_to_home&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(u.a,{duration:"500"})),this.props.goto_orders_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-orders")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(u.a,{duration:"500"})),this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/my-account")},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(u.a,{duration:"500"})),!this.props.back_to_home&&!this.props.goto_orders_page&&!this.props.goto_accounts_page&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.goBack()},200)}},i.a.createElement("i",{className:"si si-arrow-left"}),i.a.createElement(u.a,{duration:"500"}))),i.a.createElement("p",{className:"form-control search-input d-flex align-items-center"},this.props.logo&&i.a.createElement("img",{src:"/assets/img/logos/logo.png",alt:localStorage.getItem("storeName"),width:"120"}),this.props.has_title?i.a.createElement(i.a.Fragment,null,this.props.from_checkout?i.a.createElement("span",{className:"nav-page-title"},localStorage.getItem("cartToPayText")," ",i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.title,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))):i.a.createElement("span",{className:"nav-page-title"},this.props.title)):null,this.props.has_delivery_icon&&i.a.createElement(p.a,{left:!0},i.a.createElement("img",{src:"/assets/img/various/delivery-bike.png",alt:this.props.title,className:"nav-page-title"}))),this.props.has_restaurant_info?i.a.createElement("div",{className:"fixed-restaurant-info hidden",ref:function(t){e.heading=t}},i.a.createElement("span",{className:"font-w700 fixedRestaurantName"},this.props.restaurant.name),i.a.createElement("br",null),i.a.createElement("span",{className:"font-w400 fixedRestaurantTime"},i.a.createElement("i",{className:"si si-clock"})," ",this.props.restaurant.delivery_time," ",localStorage.getItem("homePageMinsText"))):null,i.a.createElement("div",{className:"input-group-append"},!this.props.disable_search&&i.a.createElement("button",{type:"submit",className:"btn search-navs-btns",style:{position:"relative"}},i.a.createElement("i",{className:"si si-magnifier"}),i.a.createElement(u.a,{duration:"500"})),this.props.homeButton&&i.a.createElement("button",{type:"button",className:"btn search-navs-btns nav-home-btn",style:{position:"relative"},onClick:function(){setTimeout(function(){e.context.router.history.push("/")},200)}},i.a.createElement("i",{className:"si si-home fa-2x text-muted"}),i.a.createElement(u.a,{duration:"500"}))))))))}}]),t}(s.Component);g.contextTypes={router:function(){return null}},t.a=g},208:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e){if(e){var t=parseFloat(e);return t=t.toFixed(2)}return 0}},210:function(e,t,a){"use strict";a.d(t,"a",function(){return o});var r=a(94),n=a(208),o=function(e){return function(t){var a={productQuantity:e.reduce(function(e,t){return++e},0),totalPrice:e.reduce(function(e,t){var a=0;return t.selectedaddons&&t.selectedaddons.map(function(e){return a+=parseFloat(e.price)}),e+=t.price*t.quantity+a*t.quantity,e=parseFloat(e),Object(n.a)(e),e},0)};t({type:r.a,payload:a})}}},211:function(e,t,a){"use strict";a.d(t,"c",function(){return i}),a.d(t,"b",function(){return m}),a.d(t,"d",function(){return u}),a.d(t,"e",function(){return d}),a.d(t,"f",function(){return p}),a.d(t,"h",function(){return g}),a.d(t,"g",function(){return h}),a.d(t,"i",function(){return y}),a.d(t,"a",function(){return f});var r=a(91),n=a(30),o=a(10),l=a(9),c=a.n(l),s=a(214),i=function(e,t,a){return function(r){return c.a.post(o.C,{id:e,latitude:t,longitude:a}).then(function(e){var t=e.data;return r({type:n.b,payload:t})}).catch(function(e){console.log(e)})}},m=function(e){return function(t){return c.a.post(o.E+"/"+e).then(function(e){var a=e.data;return t({type:n.b,payload:a})}).catch(function(e){console.log(e)})}},u=function(e){return function(t){return c.a.post(o.D+"/"+e).then(function(e){var a=e.data;return t({type:n.c,payload:a})}).catch(function(e){console.log(e)})}},d=function(e){return function(t){c.a.post(o.F+"/"+e).then(function(e){var a=e.data;return t({type:n.d,payload:a})}).catch(function(e){console.log(e)})}},p=function(e){return function(t){return c.a.post(o.J,{id:e}).then(function(e){var a=e.data;return t({type:n.h,payload:a})}).catch(function(e){console.log(e)})}},g=function(){return function(e){return e({type:n.f,payload:[]})}},h=function(){return function(e){return e({type:n.e,payload:[]})}},y=function(e,t,a,o){return function(l,c){var i=a+t,m=o+t,u=[],d=[];return e&&[e].length>=0&&Object.keys(e).forEach(function(a){e[a].forEach(function(e){u.push(e);var a=new s.a(u,["name"],{caseSensitive:!1});d=a.search(t)})}),d.length>0?l({type:n.g,payload:{items:Object(r.a)({},i,d)}}):d.length<=0?l({type:n.g,payload:{items:Object(r.a)({},m,d)}}):void 0}},f=function(e){return function(t){return t({type:n.a,payload:e})}}},218:function(e,t,a){"use strict";a.d(t,"a",function(){return r});var r=function(e,t,a,r){function n(e){return e*Math.PI/180}var o=n(r-t),l=n(a-e),c=Math.sin(o/2)*Math.sin(o/2)+Math.cos(n(t))*Math.cos(n(r))*Math.sin(l/2)*Math.sin(l/2);return 6371*(2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)))}},222:function(e,t,a){"use strict";a.d(t,"b",function(){return c}),a.d(t,"a",function(){return s});var r=a(98),n=a(10),o=a(9),l=a.n(o),c=function(){return function(e){return e({type:r.a,payload:!0})}},s=function(e){return function(t){return l.a.post(n.g,{items:e}).then(function(e){return e.data}).catch(function(e){console.log(e)})}}},232:function(e,t,a){"use strict";a.d(t,"a",function(){return i});var r=a(97),n=a(10),o=a(95),l=a(9),c=a.n(l),s=a(210),i=function(e,t,a,l,i,m,u,d,p,g,h,y){return function(f,b){return c.a.post(n.W,{token:e.data.auth_token,user:e,order:t,coupon:a,location:l,order_comment:i,total:m,method:u,payment_token:d,delivery_type:p,partial_wallet:g,dis:h,pending_payment:y}).then(function(e){var t=e.data;if(!t.success)return t;f({type:r.a,payload:t});var a=b().cart.products;localStorage.removeItem("orderComment");for(var n=a.length-1;n>=0;n--)a.splice(n,1);f(Object(s.a)(a)),localStorage.removeItem("appliedCoupon");f({type:o.a,payload:[]})}).catch(function(e){return e.response})}}},233:function(e,t,a){"use strict";var r=a(218);t.a=function(e,t,a,n,o,l){var c=[{lat:parseFloat(t),lng:parseFloat(e)}],s=[{lat:parseFloat(n),lng:parseFloat(a)}],i=o.maps.TravelMode.DRIVING;(new o.maps.DistanceMatrixService).getDistanceMatrix({origins:c,destinations:s,travelMode:i},function(o,c){if(console.log("RESPONSE",o),console.log("STATUS",o.rows[0].elements[0].status),"OK"===o.rows[0].elements[0].status){var s=(o.rows[0].elements[0].distance.value/1e3).toFixed(1);l(s)}else{console.log("Falling back to basic distance calculation");var i=Object(r.a)(e,t,a,n);l(i)}})}},323:function(e,t,a){"use strict";a.r(t);var r=a(3),n=a(4),o=a(6),l=a(5),c=a(7),s=a(0),i=a.n(s),m=a(206),u=a(39),d=a(91),p=a(92),g=a(44),h=a(57),y=a(278),f=a.n(y),b=a(283),v=a.n(b),E=a(10),S=a(16),k=a(208),I=a(232),_=a(90),w=a(218),C=a(233),x=a(9),N=a.n(x),P=a(211),F=a(31),O=a.n(F),T=a(48),A=a(235),j=a(236),W=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={postal:""},a.handleSubmit=function(){var e=Object(T.a)(O.a.mark(function e(t){var r,n,o,l,c,s,i,m,u;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,n=r.stripe,o=r.elements,l=r.data,c=o.getElement(j.CardNumberElement),e.next=5,n.createPaymentMethod({type:"card",card:c});case 5:s=e.sent,i=s.error,m=s.paymentMethod,i?console.log(i):(l.data.handlePaymentProcessing(!0),u=m.id,N.a.post(E.fb,{token:l.data.user.data.auth_token,id:u,amount:100*l.data.total,currency:localStorage.getItem("currencyId"),payment_method_types:["card"]}).then(function(e){console.log("STRIPE DATA",e.data);var t=e.data.client_secret;console.log(t),n.confirmCardPayment(t).then(function(e){e.paymentIntent&&"succeeded"===e.paymentIntent.status?(console.log("Payment successful!!!"),l.data.placeOrder("","STRIPE")):(console.log("Something went wrong..."),l.data.handlePaymentProcessing(!1))}).catch(function(e){console.log(e)})}).catch(function(e){l.data.handlePaymentProcessing(!1),console.log(e)}));case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.stripe,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"cardNumber"},localStorage.getItem("checkoutCardNumber")),i.a.createElement(j.CardNumberElement,{id:"cardNumber"}),i.a.createElement("label",{htmlFor:"expiry"},localStorage.getItem("checkoutCardExpiration")),i.a.createElement(j.CardExpiryElement,{id:"expiry"}),i.a.createElement("label",{htmlFor:"cvc"},localStorage.getItem("checkoutCardCvv")),i.a.createElement(j.CardCvcElement,{id:"cvc"}),"true"===localStorage.getItem("stripeCheckoutPostalCode")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("label",{htmlFor:"postal"},localStorage.getItem("checkoutCardPostalCode")),i.a.createElement("input",{id:"postal",required:!0,value:this.state.postal,className:"form-control StripeElement",onChange:function(t){e.setState({postal:t.target.value})}})),i.a.createElement("button",{type:"submit",disabled:!a,className:"btn stripe-pay-btn"},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),r.data.total,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))}}]),t}(s.Component),M=function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement(j.ElementsConsumer,null,function(t){var a=t.stripe,r=t.elements;return i.a.createElement(W,{stripe:a,elements:r,data:e})}))},R=Object(A.a)(localStorage.getItem("stripePublicKey"),{locale:localStorage.getItem("stripeLocale")}),z=function(e){return i.a.createElement(j.Elements,{stripe:R},i.a.createElement(M,{data:e}))},L={classes:{base:"StripeElementIdeal",focus:"StripeElementIdeal--focus"},style:{base:{padding:"10px 8px",fontSize:"15px",color:"#5f5f5f",letterSpacing:"0.025em","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},D=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",errorMessage:null,paymentMethod:null,client_secret:""},a.handleSubmit=function(){var e=Object(T.a)(O.a.mark(function e(t){var r,n,o,l,c,s,i,m;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,n=r.stripe,o=r.elements,l=r.data,e.next=4,n.createPaymentMethod({type:"ideal",ideal:o.getElement(j.IdealBankElement)});case 4:c=e.sent,s=c.error,i=c.paymentMethod,s||(l.data.handlePaymentProcessing(!0),m=i.id,N.a.post(E.fb,{token:l.data.user.data.auth_token,id:m,amount:100*l.data.total,currency:"eur",payment_method_types:["ideal"]}).then(function(e){new Promise(function(e){l.data.placeOrder("","STRIPE",!0),e("Order Placed")}).then(function(){a.setState({client_secret:e.data.client_secret})})}).catch(function(e){l.data.handlePaymentProcessing(!1),console.log(e)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmIdealPayment=function(e){var t=a.props,r=t.stripe,n=t.elements;if(""!==a.state.client_secret){var o=r.confirmIdealPayment(a.state.client_secret,{payment_method:{ideal:n.getElement(j.IdealBankElement),billing_details:{name:a.state.name}},return_url:E.gb+"?order_id="+e.data.id}).error;o&&console.log(o.message)}},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data.data.checkout!==e.data.data.checkout&&(console.log("Order Placed"),this.handleConfirmIdealPayment(e.data.data.checkout))}},{key:"render",value:function(){var e=this,t=this.props,a=t.stripe,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"name"},localStorage.getItem("checkoutCardFullname")),i.a.createElement("input",{id:"name",required:!0,className:"form-control StripeElement",onChange:function(t){e.setState({name:t.target.value})}}),i.a.createElement("label",{htmlFor:"ideal"},localStorage.getItem("checkoutIdealSelectBankText")),i.a.createElement(j.IdealBankElement,{id:"ideal",options:L}),i.a.createElement("button",{type:"submit",disabled:!a,className:"btn stripe-pay-btn"},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),r.data.total,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))}}]),t}(s.Component),B=function(e){return i.a.createElement(j.ElementsConsumer,null,function(t){var a=t.stripe,r=t.elements;return i.a.createElement(D,{stripe:a,elements:r,data:e})})},G=Object(A.a)(localStorage.getItem("stripePublicKey"),{locale:localStorage.getItem("stripeLocale")}),K=Object(S.b)(function(e){return{checkout:e.checkout.checkout}},{})(function(e){return i.a.createElement(j.Elements,{stripe:G},i.a.createElement(B,{data:e}))}),Y={accountHolderType:"individual",classes:{base:"StripeElementFpx",focus:"StripeElementFpx--focus"},style:{base:{padding:"10px 8px",fontSize:"15px",color:"#5f5f5f",letterSpacing:"0.025em","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}},q=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={name:"",errorMessage:null,paymentMethod:null,client_secret:""},a.handleSubmit=function(){var e=Object(T.a)(O.a.mark(function e(t){var r,n,o,l,c,s,i,m;return O.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),r=a.props,n=r.stripe,o=r.elements,l=r.data,e.next=4,n.createPaymentMethod({type:"fpx",fpx:o.getElement(j.FpxBankElement)});case 4:c=e.sent,s=c.error,i=c.paymentMethod,s||(l.data.handlePaymentProcessing(!0),m=i.id,N.a.post(E.fb,{token:l.data.user.data.auth_token,id:m,amount:100*l.data.total,currency:"myr",payment_method_types:["fpx"]}).then(function(e){new Promise(function(e){l.data.placeOrder("","STRIPE",!0),e("Order Placed")}).then(function(){a.setState({client_secret:e.data.client_secret})})}).catch(function(e){l.data.handlePaymentProcessing(!1),console.log(e)}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.handleConfirmFpxPayment=function(e){var t=a.props,r=t.stripe,n=t.elements;if(""!==a.state.client_secret){var o=r.confirmFpxPayment(a.state.client_secret,{payment_method:{fpx:n.getElement(j.FpxBankElement),billing_details:{name:a.state.name}},return_url:E.gb+"?order_id="+e.data.id}).error;o&&console.log(o.message)}},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.props.data.data.checkout!==e.data.data.checkout&&(console.log("Order Placed"),this.handleConfirmFpxPayment(e.data.data.checkout))}},{key:"render",value:function(){var e=this,t=this.props,a=t.stripe,r=t.data;return i.a.createElement(i.a.Fragment,null,i.a.createElement("form",{onSubmit:this.handleSubmit},i.a.createElement("label",{htmlFor:"name"},localStorage.getItem("checkoutCardFullname")),i.a.createElement("input",{id:"name",required:!0,className:"form-control StripeElement",onChange:function(t){e.setState({name:t.target.value})}}),i.a.createElement("label",{htmlFor:"fpx"},localStorage.getItem("checkoutFpxSelectBankText")),i.a.createElement(j.FpxBankElement,{accountHolderType:"individual",id:"fpx",options:Y}),i.a.createElement("button",{type:"submit",disabled:!a,className:"btn stripe-pay-btn"},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),r.data.total,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))}}]),t}(s.Component),V=function(e){return i.a.createElement(j.ElementsConsumer,null,function(t){var a=t.stripe,r=t.elements;return i.a.createElement(q,{stripe:a,elements:r,data:e})})},U=Object(A.a)(localStorage.getItem("stripePublicKey"),{locale:localStorage.getItem("stripeLocale")}),J=Object(S.b)(function(e){return{checkout:e.checkout.checkout}},{})(function(e){return i.a.createElement(j.Elements,{stripe:U},i.a.createElement(V,{data:e}))}),H=a(295),Q=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={payment_gateway_loading:!0,loading:!1,stripe_opened:!1,delivery_charges:0,error:!1,razorpay_opened:!1,razorpay_success:!1,canPayPartialWithWallet:!1,walletChecked:!1,canPayFullWithWallet:!1,distance:0,placeOrderError:!1,errorMessage:"",payWithStripeCard:!1,payWithStripeIdeal:!1,payWithStripeFpx:!1,paymongoCCNumber:"",paymongoCCExp:"",paymongoCCCvv:"",showPaymongoForm:!1,paymongoRedirect:"",paymongo_processing:!1},a.__doesRestaurantOperatesAtThisLocation=function(e){var t=a.props.user;if(t.success){var r=Object(p.a)(Object(p.a)(a));if("true"===localStorage.getItem("enGDMA"))"DELIVERY"===localStorage.getItem("userSelected")&&a.props.handleProcessDistanceCalcLoading(!0),Object(C.a)(e.longitude,e.latitude,t.data.default_address.longitude,t.data.default_address.latitude,a.props.google,function(e){"DELIVERY"===localStorage.getItem("userSelected")&&("DYNAMIC"===r.props.restaurant_info.delivery_charge_type&&r.setState({distance:e},function(){r.calculateDynamicDeliveryCharge()}),r.props.handleProcessDistanceCalcLoading(!1))});else{var n=Object(w.a)(e.longitude,e.latitude,t.data.default_address.longitude,t.data.default_address.latitude);"DELIVERY"===localStorage.getItem("userSelected")&&"DYNAMIC"===a.props.restaurant_info.delivery_charge_type&&a.setState({distance:n},function(){a.calculateDynamicDeliveryCharge()})}}},a.calculateDynamicDeliveryCharge=function(){var e=a.props.restaurant_info,t=a.state.distance;if(t>e.base_delivery_distance){var r=(t-e.base_delivery_distance)/e.extra_delivery_distance*e.extra_delivery_charge,n=parseFloat(e.base_delivery_charge)+parseFloat(r);"true"===localStorage.getItem("enDelChrRnd")&&(n=Math.ceil(n)),a.setState({delivery_charges:n})}else a.setState({delivery_charges:e.base_delivery_charge})},a.onOpened=function(){a.setState({stripe_opened:!0})},a.onToken=function(e){a.__placeOrder(e,"STRIPE")},a.onSuccess=function(e){a.__placeOrder("","PAYPAL")},a.onCancel=function(e){console.log("Paypal Payment Canceled")},a.onError=function(e){console.log("Error!")},a.callback=function(e){if("success"===e.status){var t=e.reference;a.__placeOrder(t,"PAYSTACK")}else console.log(e)},a.close=function(){console.log("PayStack Payment Closed")},a.getReference=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-.=",a=0;a<15;a++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},a.__placeOrder=function(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=document.getElementsByClassName("paymentGatewayBlock"),o=0;o<n.length;o++)n[o].classList.add("no-click");var l=a.props,c=l.user,s=l.cartProducts,i=l.coupon,m=l.cartTotal;if(c.success){"SELFPICKUP"===localStorage.getItem("userSelected")?a.props.placeOrder(c,s,i.success?i:null,JSON.parse(localStorage.getItem("userSetAddress")),localStorage.getItem("orderComment"),m,t,e,2,a.state.walletChecked,parseFloat(a.state.distance),r).then(function(e){e&&(e.success||(a.setState({placeOrderError:!0,errorMessage:e.message}),429===e.status&&a.setState({errorMessage:localStorage.getItem("tooManyApiCallMessage")}),a.resetPage()))}):a.props.placeOrder(c,s,i.success?i:null,JSON.parse(localStorage.getItem("userSetAddress")),localStorage.getItem("orderComment"),m,t,e,1,a.state.walletChecked,parseFloat(a.state.distance),r).then(function(e){e&&(console.log("Came here"),console.log("THIS",e),401===e.status?(a.setState({placeOrderError:!0,errorMessage:localStorage.getItem("userInActiveMessage")}),a.resetPage()):e.success||(a.setState({placeOrderError:!0,errorMessage:e.message}),429===e.status&&a.setState({errorMessage:localStorage.getItem("tooManyApiCallMessage")}),a.resetPage()))});var u=document.getElementById("progressBar");u.classList.remove("hidden");var d=0,p=setInterval(function(){d>100&&clearInterval(p),d+=1,u.style.width=d+"%"},20);a.setState({stripe_opened:!1})}},a.resetPage=function(){var e=document.getElementById("progressBar");e.classList.add("hidden"),setTimeout(function(){e.style.width="0%"},2200);for(var t=document.getElementsByClassName("paymentGatewayBlock"),a=0;a<t.length;a++)t[a].classList.remove("no-click")},a.getTotalAfterCalculation=function(){var e=a.props,t=e.coupon,r=e.restaurant_info,n=e.user,o=a.props.cartTotal.totalPrice,l=0;if(t.code)if("PERCENTAGE"===t.discount_type){var c=Object(k.a)(t.discount/100*parseFloat(o));t.max_discount&&parseFloat(c)>=t.max_discount&&(c=t.max_discount),t.appliedAmount=c,l=Object(k.a)(Object(k.a)(parseFloat(o)-c+parseFloat(r.restaurant_charges||0)+parseFloat(a.state.delivery_charges||0)))}else l=Object(k.a)(parseFloat(o)-(parseFloat(t.discount)||0)+((parseFloat(r.restaurant_charges)||0)+(parseFloat(a.state.delivery_charges)||0)));else l=Object(k.a)(parseFloat(o)+parseFloat(r.restaurant_charges||0)+parseFloat(a.state.delivery_charges||0));return"true"===localStorage.getItem("taxApplicable")?(l=Object(k.a)(parseFloat(parseFloat(l)+parseFloat(parseFloat(localStorage.getItem("taxPercentage"))/100)*l)),a.state.walletChecked&&n.data.wallet_balance<l&&(l-=n.data.wallet_balance),l):(a.state.walletChecked&&n.data.wallet_balance<l&&(l-=n.data.wallet_balance),l)},a.__handleRazorPay=function(){var e=Object(p.a)(Object(p.a)(a));a.setState({razorpay_opened:!0});var t=Object(k.a)(parseFloat(a.getTotalAfterCalculation()));N.a.post(E.X,{totalAmount:t}).then(function(r){if(r.data.razorpay_success){var n={key:localStorage.getItem("razorpayKeyId"),amount:t,name:localStorage.getItem("storeName"),currency:localStorage.getItem("currencyId"),order_id:r.data.response.id,handler:function(t){e.setState({razorpay_opened:!1,razorpay_success:!0});e.__placeOrder("","RAZORPAY")},modal:{ondismiss:function(){console.log("closed"),e.setState({razorpay_opened:!1,razorpay_success:!1})}},prefill:{name:a.props.user.data.name,email:a.props.user.data.email,contact:a.props.user.data.phone}};new window.Razorpay(n).open()}}).catch(function(e){console.log(e)})},a.handleInput=function(e){var t=e.target,r=t.name,n=t.value;a.setState(Object(d.a)({},r,n))},a.__showPaymongoForm=function(){a.setState({showPaymongoForm:!0})},a.handlePaymongo=function(e){e.preventDefault();var t=a.state.paymongoCCNumber,r=a.state.paymongoCCExp,n=a.state.paymongoCCCvv;if(""===t||""===r||""===n)a.setState({placeOrderError:!0,errorMessage:"Please enter credit card details."});else{a.props.handleLoading(!0),a.setState({paymongo_processing:!0});var o=Object(p.a)(Object(p.a)(a));a.setState({paymongo_opened:!0,showPaymongoForm:!1,placeOrderError:!1,errorMessage:""});var l=Object(k.a)(parseFloat(a.getTotalAfterCalculation()));N.a.post(E.U,{amount:l,name:a.props.user.data.name,email:a.props.user.data.email,phone:a.props.user.data.phone,ccNum:t,ccExp:r,ccCvv:n}).then(function(e){console.log(e),e.data.paymongo_success&&("succeeded"===e.data.status?(o.setState({paymongo_opened:!1,paymongo_success:!0}),a.__placeOrder(e.data.token,"PAYMONGO",!1)):"awaiting_next_action"===e.data.status?(console.log("3d secure"),o.setState({paymongo_opened:!1,paymongo_success:!0,paymongoRedirect:e.data.redirect_url}),a.__placeOrder(e.data.token,"PAYMONGO",!0)):(a.props.handleLoading(!1),o.setState({paymongo_processing:!1,paymongo_opened:!0,paymongo_success:!1,placeOrderError:!0,errorMessage:"Payment failed: "+e.data.error})))}).catch(function(e){console.log(e)})}},a.handlePayWithStripeCardToggle=function(e){a.setState({payWithStripeCard:!a.state.payWithStripeCard},function(){a.state.payWithStripeCard?(a.refs.payWithStripeCardToggle.classList.add("stripe-toggle-active"),a.refs.payWithStripeCardToggle.scrollIntoView({behavior:"instant",block:"start"})):a.refs.payWithStripeCardToggle.classList.remove("stripe-toggle-active")})},a.handlePayWithStripeIdealToggle=function(e){a.setState({payWithStripeIdeal:!a.state.payWithStripeIdeal},function(){a.state.payWithStripeIdeal?(a.refs.payWithStripeIdealToggle.classList.add("stripe-toggle-active"),a.refs.payWithStripeIdealToggle.scrollIntoView({behavior:"instant",block:"start"})):a.refs.payWithStripeIdealToggle.classList.remove("stripe-toggle-active")})},a.handlePayWithStripeFpxToggle=function(e){a.setState({payWithStripeFpx:!a.state.payWithStripeFpx},function(){a.state.payWithStripeFpx?(a.refs.payWithStripeFpxToggle.classList.add("stripe-toggle-active"),a.refs.payWithStripeFpxToggle.scrollIntoView({behavior:"instant",block:"start"})):a.refs.payWithStripeFpxToggle.classList.remove("stripe-toggle-active")})},a.handlePaymentGatewayRedirect=function(e){console.log("I am here"),console.log("Placed order",a.props.checkout.id);var t=e+"&order_id="+a.props.checkout.id;window.location.replace(t)},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user;null!==localStorage.getItem("activeRestaurant")&&this.props.getRestaurantInfoById(localStorage.getItem("activeRestaurant")).then(function(t){t&&t.payload.id&&e.__doesRestaurantOperatesAtThisLocation(t.payload)}),t.success&&this.props.updateUserInfo(t.data.id,t.data.auth_token,null),"SELFPICKUP"===localStorage.getItem("userSelected")?this.setState({delivery_charges:0}):this.setState({delivery_charges:this.props.restaurant_info.delivery_charges})}},{key:"componentWillReceiveProps",value:function(e){if(e.gatewayStatus&&this.setState({payment_gateway_loading:!1}),e.checkout!==this.props.checkout){if(localStorage.removeItem("appliedCoupon"),"PAYMONGO"===e.checkout.data.payment_mode&&""!==this.state.paymongoRedirect)return window.location=this.state.paymongoRedirect,null;if("MERCADOPAGO"===e.checkout.data.payment_mode)return window.location=E.S+"/"+e.checkout.data.id,null;8!==e.checkout.data.orderstatus_id&&this.context.router.history.push("/running-order/"+e.checkout.data.unique_order_id)}e.user.data.wallet_balance>0&&this.setState({canPayPartialWithWallet:!0,canPayFullWithWallet:!1}),e.user.data.wallet_balance>=parseFloat(this.getTotalAfterCalculation())&&this.setState({canPayFullWithWallet:!0,canPayPartialWithWallet:!1})}},{key:"render",value:function(){var e=this,t={sandbox:localStorage.getItem("paypalSandboxKey"),production:localStorage.getItem("paypalProductionKey")};return this.props.toPay(Object(k.a)(parseFloat(this.getTotalAfterCalculation()))),i.a.createElement(i.a.Fragment,null,this.state.placeOrderError&&i.a.createElement("div",{className:"auth-error ongoing-payment"},i.a.createElement("div",{className:"error-shake"},this.state.errorMessage)),this.props.paymentgateways.some(function(e){return"Razorpay"===e.name})&&i.a.createElement(h.Helmet,null,i.a.createElement("script",{src:"https://checkout.razorpay.com/v1/checkout.js"})),(this.state.stripe_opened||this.state.razorpay_opened)&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"height-80 overlay-loading ongoing-payment-spin"},i.a.createElement("div",{className:"spin-load"})),i.a.createElement("div",{className:"auth-error ongoing-payment"},i.a.createElement("div",{className:"error-shake"},localStorage.getItem("checkoutPaymentInProcess")))),i.a.createElement("div",{className:"col-12 mb-50"},this.state.payment_gateway_loading?i.a.createElement("div",{className:"row"},i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement(g.a,{height:70,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},i.a.createElement("rect",{x:"320",y:"10",rx:"4",ry:"4",width:"55",height:"55"}),i.a.createElement("rect",{x:"0",y:"10",rx:"0",ry:"0",width:"85",height:"20"}),i.a.createElement("rect",{x:"0",y:"40",rx:"0",ry:"0",width:"190",height:"18"}))))),i.a.createElement("div",{className:"col-12"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement(g.a,{height:70,width:window.innerWidth,speed:1.2,primaryColor:"#f3f3f3",secondaryColor:"#ecebeb"},i.a.createElement("rect",{x:"320",y:"10",rx:"4",ry:"4",width:"55",height:"55"}),i.a.createElement("rect",{x:"0",y:"10",rx:"0",ry:"0",width:"85",height:"20"}),i.a.createElement("rect",{x:"0",y:"40",rx:"0",ry:"0",width:"190",height:"18"})))))):i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"row"},this.state.canPayPartialWithWallet&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12",onClick:function(){return e.setState({walletChecked:!e.state.walletChecked})}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/wallet.png",alt:localStorage.getItem("walletName"),className:"img-fluid"})),i.a.createElement("input",{type:"checkbox",name:"walletcheckbox",defaultChecked:this.props.walletChecked,className:"wallet-checkbox"}),i.a.createElement("div",{className:"font-size-h3 font-w600"},this.state.walletChecked&&i.a.createElement("i",{className:"si si-check mr-2",style:{color:localStorage.getItem("cartColorBg"),fontWeight:"900"}}),localStorage.getItem("walletName"),":"," ",i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},this.state.walletChecked?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}}," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance," ","right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))," ",localStorage.getItem("willbeDeductedText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat")):i.a.createElement(i.a.Fragment,null,i.a.createElement("span",null,localStorage.getItem("payPartialWithWalletText")),i.a.createElement("button",{className:"btn btn-redeem mt-2",style:{color:localStorage.getItem("cartColorBg"),borderColor:localStorage.getItem("cartColorBg")}},localStorage.getItem("walletRedeemBtnText")))))),i.a.createElement("hr",{className:"mb-4"}))),i.a.createElement("hr",null),i.a.createElement("div",{className:"col-12 text-center mb-0 mt-4"},i.a.createElement("h4",{className:"text-muted"},localStorage.getItem("checkoutPaymentListTitle"))),this.state.canPayFullWithWallet&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","WALLET")}},i.a.createElement("p",{className:"mb-1"}),i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/wallet.png",alt:localStorage.getItem("walletName"),className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("walletName")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("payFullWithWalletText"),i.a.createElement("br",null),i.a.createElement("span",{style:{color:localStorage.getItem("storeColor")}},"left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),parseFloat(this.getTotalAfterCalculation()),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))," ",localStorage.getItem("willbeDeductedText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),this.props.user.data.wallet_balance,"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))),i.a.createElement("hr",null)),i.a.createElement("div",{className:"col-12"},"true"===localStorage.getItem("stripeAcceptIdealPayment")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0",ref:"payWithStripeIdealToggle",onClick:this.handlePayWithStripeIdealToggle},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/ideal.png",alt:"stripe-ideal",className:"img-fluid",style:{width:"50px"}})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutStripeIdealText"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutStripeIdealSubText")))))),this.state.payWithStripeIdeal&&i.a.createElement("div",{className:"stripe-card-container"},i.a.createElement(K,{user:this.props.user,total:Object(k.a)(parseFloat(this.getTotalAfterCalculation())),handlePaymentProcessing:this.props.handleLoading,placeOrder:this.__placeOrder,handlePaymentGatewayRedirect:this.handlePaymentGatewayRedirect,checkout:this.props.checkout})))),i.a.createElement("div",{className:"col-12"},"true"===localStorage.getItem("stripeAcceptFpxPayment")&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0",ref:"payWithStripeFpxToggle",onClick:this.handlePayWithStripeFpxToggle},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/fpx.png",alt:"stripe-fpx",className:"img-fluid",style:{width:"50px"}})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutStripeFpxText"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutStripeFpxSubText")))))),this.state.payWithStripeFpx&&i.a.createElement("div",{className:"stripe-card-container"},i.a.createElement(J,{user:this.props.user,total:Object(k.a)(parseFloat(this.getTotalAfterCalculation())),handlePaymentProcessing:this.props.handleLoading,placeOrder:this.__placeOrder,handlePaymentGatewayRedirect:this.handlePaymentGatewayRedirect,checkout:this.props.checkout})))),this.props.paymentgateways.map(function(a){return i.a.createElement(i.a.Fragment,{key:a.id},i.a.createElement("div",{className:"col-12 paymentGatewayBlock"},"Stripe"===a.name&&i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"col-12 p-0",ref:"payWithStripeCardToggle",onClick:e.handlePayWithStripeCardToggle},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/stripe.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutStripeText"),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutStripeSubText")))))),e.state.payWithStripeCard&&i.a.createElement("div",{className:"stripe-card-container"},i.a.createElement(z,{user:e.props.user,total:Object(k.a)(parseFloat(e.getTotalAfterCalculation())),handlePaymentProcessing:e.props.handleLoading,placeOrder:e.__placeOrder})))),"COD"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","COD")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/cod.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutCodText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutCodSubText"))))),"Razorpay"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__handleRazorPay()}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/razorpay.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutRazorpayText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutRazorpaySubText"))))),"PayStack"===a.name&&i.a.createElement("div",{className:"col-12 mb-4 mt-4 paymentGatewayBlock"},i.a.createElement(v.a,{text:localStorage.getItem("paystackPayText"),class:"payButton",callback:e.callback,close:e.close,disabled:!1,embed:!1,reference:e.getReference(),email:e.props.user.data.email,amount:parseInt(parseFloat(100*e.getTotalAfterCalculation())),paystackkey:localStorage.getItem("paystackPublicKey"),tag:"button",currency:localStorage.getItem("currencyId")})),"Paypal"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock"},i.a.createElement(f.a,{env:localStorage.getItem("paypalEnv"),client:t,currency:localStorage.getItem("currencyId"),total:parseFloat(e.getTotalAfterCalculation()),shipping:1,onError:e.onError,onSuccess:e.onSuccess,onCancel:e.onCancel,style:{size:"responsive",color:"silver",shape:"rect"}})),"MercadoPago"===a.name&&i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__placeOrder("","MERCADOPAGO")}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/mercadopago.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutMercadoPagoText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutMercadoPagoSubText"))))),"PayMongo"===a.name&&(e.state.showPaymongoForm?i.a.createElement("div",{className:"col-12 paymentGatewayBlock"},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("form",{onSubmit:e.handlePaymongo},i.a.createElement(H.a,null,function(t){var a=t.meta,r=t.getCardNumberProps,n=t.getExpiryDateProps,o=t.getCVCProps;return i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"font-size-h4 font-w600 mb-2"},localStorage.getItem("checkoutPayMongoText")),i.a.createElement("input",Object.assign({className:"form-control edit-address-input"},r({onChange:e.handleInput}),{name:"paymongoCCNumber",value:e.state.paymongoCCNumber,placeholder:localStorage.getItem("checkoutCardNumber")})),i.a.createElement("input",Object.assign({className:"form-control edit-address-input"},n({onChange:e.handleInput}),{name:"paymongoCCExp",value:e.state.paymongoCCExp,placeholder:localStorage.getItem("checkoutCardExpiration")})),i.a.createElement("input",Object.assign({className:"form-control edit-address-input"},o({onChange:e.handleInput}),{value:e.state.paymongoCCCvv,name:"paymongoCCCvv",placeholder:localStorage.getItem("checkoutCardCvv")})),a.isTouched&&a.error&&i.a.createElement("span",null,"Error: ",a.error))}),i.a.createElement("div",{className:"mt-20 px-15 pt-15 button-block"},i.a.createElement("button",{type:"submit",className:"btn btn-main",style:{backgroundColor:localStorage.getItem("storeColor")}},localStorage.getItem("checkoutPayText")," ","left"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"),e.getTotalAfterCalculation(),"right"===localStorage.getItem("currencySymbolAlign")&&localStorage.getItem("currencyFormat"))))))):i.a.createElement("div",{className:"col-12 paymentGatewayBlock",onClick:function(){return e.__showPaymongoForm()}},i.a.createElement("div",{className:"block block-link-shadow text-left shadow-light"},i.a.createElement("div",{className:"block-content block-content-full clearfix py-3 payment-select-block"},i.a.createElement("div",{className:"float-right mt-10"},i.a.createElement("img",{src:"/assets/img/various/paymongo.png",alt:a.name,className:"img-fluid"})),i.a.createElement("div",{className:"font-size-h3 font-w600"},localStorage.getItem("checkoutPayMongoText")),i.a.createElement("div",{className:"font-size-sm font-w600 text-muted"},localStorage.getItem("checkoutPayMongoSubText")))))))})))),i.a.createElement("div",{className:"progress push m-0 progress-transparent",style:{height:"8px"}},i.a.createElement("div",{className:"progress-bar progress-bar-striped progress-bar-animated hidden",role:"progressbar",id:"progressBar",style:{backgroundColor:localStorage.getItem("storeColor"),width:"10%"}})))}}]),t}(s.Component);Q.contextTypes={router:function(){return null}};var X=Object(S.b)(function(e){return{user:e.user.user,addresses:e.addresses.addresses,cartProducts:e.cart.products,cartTotal:e.total.data,coupon:e.coupon.coupon,checkout:e.checkout.checkout,restaurant_info:e.items.restaurant_info}},{placeOrder:I.a,updateUserInfo:_.k,getRestaurantInfoById:P.d})(Q),Z=a(341),$=a(222),ee=a(113),te=a(223),ae=a(13),re=function(e){function t(){var e,a;Object(r.a)(this,t);for(var n=arguments.length,c=new Array(n),s=0;s<n;s++)c[s]=arguments[s];return(a=Object(o.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(c)))).state={loading:!1,process_distance_calc_loading:!1,continueFetchPaymentGateway:!0,gateways_received:!1,toPay:""},a.handleLoading=function(e){a.setState({loading:e})},a.fetchPaymentGateways=function(e){a.state.continueFetchPaymentGateway?(console.log("fetching again..."),a.props.getPaymentGateways(e).then(function(e){e&&e.payload&&a.setState({continueFetchPaymentGateway:!1,gateways_received:!0})})):clearInterval(a.retryPaymentGatewaySetInterval)},a.handleProcessDistanceCalcLoading=function(e){a.setState({process_distance_calc_loading:e})},a.handleToPayText=function(e){a.setState({toPay:e})},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.user;t&&this.props.getPaymentGateways(t.data.auth_token).then(function(a){a&&a.payload?e.setState({gateways_received:!0}):(console.error("fetching payment gateways failed... trying again after 2.5s"),e.retryPaymentGatewaySetInterval=setInterval(function(){e.fetchPaymentGateways(t.data.auth_token)},2500))}),this.props.cartProducts.length&&document.getElementsByTagName("body")[0].classList.add("bg-grey-light")}},{key:"componentWillUnmount",value:function(){document.getElementsByTagName("body")[0].classList.remove("bg-grey-light"),clearInterval(this.retryPaymentGatewaySetInterval)}},{key:"render",value:function(){return this.props.cartProducts.length,window.innerWidth>768?i.a.createElement(Z.a,{to:"/"}):this.props.confirmCart?null===localStorage.getItem("storeColor")?i.a.createElement(Z.a,{to:"/"}):i.a.createElement(i.a.Fragment,null,this.state.loading&&i.a.createElement(ae.a,null),this.state.process_distance_calc_loading&&i.a.createElement(ae.a,null),i.a.createElement(u.a,{seotitle:localStorage.getItem("checkoutPageTitle"),seodescription:localStorage.getItem("seoMetaDescription"),ogtype:"website",ogtitle:localStorage.getItem("seoOgTitle"),ogdescription:localStorage.getItem("seoOgDescription"),ogurl:window.location.href,twittertitle:localStorage.getItem("seoTwitterTitle"),twitterdescription:localStorage.getItem("seoTwitterDescription")}),i.a.createElement(m.a,{boxshadow:!0,has_title:!0,title:this.state.toPay,disable_search:!0,from_checkout:!0}),i.a.createElement("div",{className:"pt-50"},i.a.createElement("div",{className:"pt-30"}),i.a.createElement(X,{handleProcessDistanceCalcLoading:this.handleProcessDistanceCalcLoading,paymentgateways:this.props.paymentgateways,gatewayStatus:this.state.gateways_received,handleLoading:this.handleLoading,toPay:this.handleToPayText,google:this.props.google}))):i.a.createElement(Z.a,{to:"/cart"})}}]),t}(s.Component);t.default=Object(te.GoogleApiWrapper)({apiKey:localStorage.getItem("googleApiKey"),LoadingContainer:ae.a})(Object(S.b)(function(e){return{total:e.total.total,user:e.user.user,cartProducts:e.cart.products,cartTotal:e.total.data,coupon:e.coupon.coupon,confirmCart:e.confirmCart.confirmCart,paymentgateways:e.paymentgateways.paymentgateways}},{checkConfirmCart:$.b,getPaymentGateways:function(e){return function(t){return N.a.post(E.w,{token:e}).then(function(e){var a=e.data;return t({type:ee.a,payload:a})}).catch(function(e){console.log(e)})}}})(re))}}]);